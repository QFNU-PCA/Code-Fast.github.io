<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C++ 标准库 <chrono></title>
</head>
<body>
<div class="article-intro" id="content">
			
			<h1>C++ 标准库 <code>&lt;chrono&gt;</code></h1>&#13;
&#13;
<p>C++11 引入了 <code>&lt;chrono&gt;</code> 库，这是一个用于处理时间和日期的库。它提供了一套丰富的工具来测量时间间隔、执行时间点的计算以及处理日期和时间。<code>&lt;chrono&gt;</code> 库是 C++ 标准库中处理时间相关操作的核心部分。</p>&#13;
<h2>基本概念</h2>&#13;
<h3>时间点（Time Points）</h3>&#13;
<p>时间点表示一个特定的时间点，通常与某个特定的时钟相关联。</p>&#13;
<h3>持续时间（Durations）</h3>&#13;
<p>持续时间表示两个时间点之间的时间间隔。</p>&#13;
<h3>时钟（Clocks）</h3>&#13;
<p>时钟是时间点和持续时间的来源。C++ 提供了几种不同的时钟，例如系统时钟、高分辨率时钟等。</p>&#13;
<h2>基本语法</h2>&#13;
<h3>包含头文件</h3>&#13;
<p>在使用 <code>&lt;chrono&gt;</code> 库之前，需要包含相应的头文件：</p>&#13;
<pre>#include &lt;chrono&gt;</pre>&#13;
<h3>使用时间点</h3>&#13;
<pre>auto now = std::chrono::system_clock::now();</pre>&#13;
<h3>使用持续时间</h3>&#13;
<pre>auto duration = std::chrono::seconds(5);</pre>&#13;
<h3>计算时间点</h3>&#13;
<pre>auto future_time = now + duration;</pre>&#13;
<h2>实例</h2>&#13;
<h3>测量函数执行时间</h3>&#13;
<p>下面是一个使用 <code>&lt;chrono&gt;</code> 库测量函数执行时间的简单示例：</p>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;chrono&gt;</span><br/>
<br/>
<span style="color: #05a;">void</span> someFunction<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #666666;">// 模拟一些操作</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">this_thread</span><span style="color: #008080;">::</span><span style="color: #007788;">sleep_for</span><span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">seconds</span><span style="color: #008000;">(</span><span style="color: #0000dd;">1</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">auto</span> start <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">high_resolution_clock</span><span style="color: #008080;">::</span><span style="color: #007788;">now</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    someFunction<span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">auto</span> end <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">high_resolution_clock</span><span style="color: #008080;">::</span><span style="color: #007788;">now</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">auto</span> duration <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">duration_cast</span><span style="color: #000080;">&lt;</span>std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">milliseconds</span><span style="color: #000080;">&gt;</span><span style="color: #008000;">(</span>end <span style="color: #000040;">-</span> start<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Function took "</span> <span style="color: #000080;">&lt;&lt;</span> duration.<span style="color: #007788;">count</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" milliseconds to execute."</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果：</p>&#13;
<pre>&#13;
Function took 1000 milliseconds to execute.</pre>&#13;
<h3>处理日期和时间</h3>&#13;
<p><code>&lt;chrono&gt;</code> 库也可以用来处理日期和时间。下面是一个使用 <code>std::chrono::system_clock</code> 和 <code>std::chrono::time_point</code> 来获取当前日期和时间的示例：</p>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;chrono&gt;</span><br/>
<span style="color: #060;">#include &lt;ctime&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">auto</span> now <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">system_clock</span><span style="color: #008080;">::</span><span style="color: #007788;">now</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">time_t</span> now_c <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">system_clock</span><span style="color: #008080;">::</span><span style="color: #007788;">to_time_t</span><span style="color: #008000;">(</span>now<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Current date and time: "</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #05a;">ctime</span><span style="color: #008000;">(</span><span style="color: #000040;">&amp;</span>now_c<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果：</p>&#13;
<pre>&#13;
Current date and time: Fri Mar 11 12:34:56 2022</pre>&#13;
<h2>高级用法</h2>&#13;
<h3>使用不同的时钟</h3>&#13;
<p>C++ 提供了多种时钟，例如：</p>&#13;
<ul>&#13;
<li><code>std::chrono::system_clock</code>：系统时钟，通常与系统时间同步。</li>&#13;
<li><code>std::chrono::steady_clock</code>：单调时钟，不会受到系统时间变化的影响。</li>&#13;
<li><code>std::chrono::high_resolution_clock</code>：提供最高分辨率的时钟。</li>&#13;
</ul>&#13;
<h3>格式化日期和时间</h3>&#13;
<p>可以使用 <code>&lt;iomanip&gt;</code> 和 <code>&lt;ctime&gt;</code> 来格式化日期和时间：</p>&#13;
&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;iomanip&gt;</span><br/>
<span style="color: #060;">#include &lt;chrono&gt;</span><br/>
<span style="color: #060;">#include &lt;ctime&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">auto</span> now <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">system_clock</span><span style="color: #008080;">::</span><span style="color: #007788;">now</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">time_t</span> now_c <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">chrono</span><span style="color: #008080;">::</span><span style="color: #007788;">system_clock</span><span style="color: #008080;">::</span><span style="color: #007788;">to_time_t</span><span style="color: #008000;">(</span>now<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">put_time</span><span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #05a;">localtime</span><span style="color: #008000;">(</span><span style="color: #000040;">&amp;</span>now_c<span style="color: #008000;">)</span>, <span style="color: #a11;">"%Y-%m-%d %H:%M:%S"</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果：</p>&#13;
<pre>&#13;
2022-03-11 12:34:56</pre>&#13;
			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>