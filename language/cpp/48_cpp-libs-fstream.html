<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C++ 文件输入输出库 - <fstream></title>
</head>
<body>
<div class="article-intro" id="content">
			
			<h1>C++ 文件输入输出库 - &lt;fstream&gt;</h1>&#13;
&#13;
<p>在 C++ 中，<code> &lt;fstream&gt;</code> 是标准库中用于文件输入输出操作的类。它提供了一种方便的方式来读写文件。</p><p><code>fstream</code>是<code>iostream</code>库的一部分，支持文本和二进制文件的读写。</p>&#13;
&#13;
<p><code>fstream</code>类是<code>iostream</code>库中的一个类，它继承自<code>istream</code>和<code>ostream</code>类，这意味着它既可以用于输入也可以用于输出。</p>&#13;
<h3>语法</h3>&#13;
<p><code>fstream</code> 的基本语法如下：</p>&#13;
<div class="example"><div class="example_code">
<span style="color: #060;">#include &lt;fstream&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">fstream</span> file<span style="color: #008080;">;</span> <span style="color: #666666;">// 创建fstream对象</span><br/>
    file.<span style="color: #007788;">open</span><span style="color: #008000;">(</span><span style="color: #a11;">"filename"</span>, mode<span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 打开文件</span><br/>
    <span style="color: #666666;">// 进行文件操作</span><br/>
    file.<span style="color: #007788;">close</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 关闭文件</span><br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>其中<code>filename</code> 是文件的名称，<code>mode</code> 是打开文件的模式，常见的模式有：</p>&#13;
<ul>&#13;
<li><code>std::ios::in</code>：以输入模式打开文件。</li>&#13;
<li><code>std::ios::out</code>：以输出模式打开文件。</li>&#13;
<li><code>std::ios::app</code>：以追加模式打开文件。</li>&#13;
<li><code>std::ios::ate</code>：打开文件并定位到文件末尾。</li>&#13;
<li><code>std::ios::trunc</code>：打开文件并截断文件，即清空文件内容。</li>&#13;
</ul>&#13;
<h3>实例</h3>&#13;
<p>写入文本文件:</p>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;fstream&gt;</span><br/>
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">fstream</span> file<span style="color: #008080;">;</span><br/>
    file.<span style="color: #007788;">open</span><span style="color: #008000;">(</span><span style="color: #a11;">"example.txt"</span>, std<span style="color: #008080;">::</span><span style="color: #007788;">ios</span><span style="color: #008080;">::</span><span style="color: #007788;">out</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 以输出模式打开文件</span><br/>
<br/>
    <span style="color: #05a;">if</span> <span style="color: #008000;">(</span><span style="color: #000040;">!</span>file<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cerr</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Unable to open file!"</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
        <span style="color: #05a;">return</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 文件打开失败</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    file <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Hello, World!"</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 写入文本</span><br/>
    file.<span style="color: #007788;">close</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 关闭文件</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>在当前目录下创建一个名为<code>example.txt</code>的文件，文件内容为：</p>&#13;
<pre>Hello, World!</pre>&#13;
<p>读取文本文件</p>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;fstream&gt;</span><br/>
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;string&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">fstream</span> file<span style="color: #008080;">;</span><br/>
    file.<span style="color: #007788;">open</span><span style="color: #008000;">(</span><span style="color: #a11;">"example.txt"</span>, std<span style="color: #008080;">::</span><span style="color: #007788;">ios</span><span style="color: #008080;">::</span><span style="color: #007788;">in</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 以输入模式打开文件</span><br/>
<br/>
    <span style="color: #05a;">if</span> <span style="color: #008000;">(</span><span style="color: #000040;">!</span>file<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cerr</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Unable to open file!"</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
        <span style="color: #05a;">return</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 文件打开失败</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">string</span> line<span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">while</span> <span style="color: #008000;">(</span>getline<span style="color: #008000;">(</span>file, line<span style="color: #008000;">)</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span> <span style="color: #666666;">// 逐行读取</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> line <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    file.<span style="color: #007788;">close</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 关闭文件</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>如果 <code>example.txt</code> 文件包含以下内容：</p>&#13;
<pre>Hello, World!&#13;
This is a test file.</pre>&#13;
<p>则程序将输出：</p>&#13;
<pre>Hello, World!&#13;
This is a test file.</pre>&#13;
<p>追加到文件:</p>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;fstream&gt;</span><br/>
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">fstream</span> file<span style="color: #008080;">;</span><br/>
    file.<span style="color: #007788;">open</span><span style="color: #008000;">(</span><span style="color: #a11;">"example.txt"</span>, std<span style="color: #008080;">::</span><span style="color: #007788;">ios</span><span style="color: #008080;">::</span><span style="color: #007788;">app</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 以追加模式打开文件</span><br/>
<br/>
    <span style="color: #05a;">if</span> <span style="color: #008000;">(</span><span style="color: #000040;">!</span>file<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cerr</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Unable to open file!"</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
        <span style="color: #05a;">return</span> <span style="color: #0000dd;">1</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 文件打开失败</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    file <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Appending this line to the file."</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 追加文本</span><br/>
    file.<span style="color: #007788;">close</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 关闭文件</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
&#13;
<p><code>example.txt</code> 文件原本包含以下内容：</p>&#13;
<pre>Hello, World!&#13;
This is a test file.</pre>&#13;
<p>执行上述程序后，文件内容将变为：</p>&#13;
<pre>Hello, World!&#13;
This is a test file.&#13;
Appending this line to the file.</pre>&#13;
			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>