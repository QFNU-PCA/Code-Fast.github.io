<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C++ 标准库 <utility></title>
</head>
<body>
<div class="article-intro" id="content">
			
			<h1>C++ 标准库 &lt;utility&gt;</h1>&#13;
&#13;
<p>C++ 标准库（Standard Template Library，STL）是 C++ 的核心组成部分，提供了一组丰富的工具和算法，以帮助开发者更高效地编写代码。</p>在 C++ 标准库中，<p><code>&lt;utility&gt;</code> 头文件包含了一些实用的工具类和函数，这些工具类和函数在编写高效、可读性强的代码时非常有用。</p>&#13;
&#13;
<p><code>&lt;utility&gt;</code> 头文件定义了多种工具类和函数，它们主要用于简化编程任务，提高代码的可读性和可维护性，这些工具类和函数包括：</p>&#13;
<ul>&#13;
<li><code>pair</code>：一个包含两个元素的容器，通常用于存储和返回两个相关联的值。</li>&#13;
<li><code>make_pair</code>：一个函数模板，用于创建 <code>pair</code> 对象。</li>&#13;
<li><code>swap</code>：一个函数模板，用于交换两个对象的值。</li>&#13;
<li><code>forward</code> 和 <code>move</code>：用于完美转发和移动语义的函数模板。</li>&#13;
</ul>&#13;
&#13;
<h2>语法</h2>&#13;
<h3>pair 类</h3>&#13;
<p><code>pair</code> 是一个模板类，可以存储两个不同类型的值。其基本语法如下：</p>&#13;
<pre>#include &lt;utility&gt;&#13;
&#13;
std::pair&lt;T1, T2&gt; p;</pre>&#13;
<p>这里，<code>T1</code> 和 <code>T2</code> 是两个不同的类型，<code>p</code> 是一个 <code>pair</code> 对象，包含两个元素：<code>first</code> 和 <code>second</code>。</p>&#13;
<h3>make_pair 函数</h3>&#13;
<p><code>make_pair</code> 是一个函数模板，用于创建 <code>pair</code> 对象。其基本语法如下：</p>&#13;
<pre>#include &lt;utility&gt;&#13;
&#13;
auto p = std::make_pair(x, y);</pre>&#13;
<p>这里，<code>x</code> 和 <code>y</code> 是两个值，<code>p</code> 是一个 <code>pair</code> 对象，其 <code>first</code> 成员存储 <code>x</code>，<code>second</code> 成员存储 <code>y</code>。</p>&#13;
<h3>swap 函数</h3>&#13;
<p><code>swap</code> 是一个函数模板，用于交换两个对象的值。其基本语法如下：</p>&#13;
<pre>#include &lt;utility&gt;&#13;
&#13;
std::swap(a, b);</pre>&#13;
<p>这里，<code>a</code> 和 <code>b</code> 是两个对象，<code>swap</code> 函数将它们的值进行交换。</p>&#13;
<h2>实例</h2>&#13;
<h3>使用 pair 和 make_pair</h3>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;utility&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #666666;">// 使用 make_pair 创建 pair 对象</span><br/>
    <span style="color: #05a;">auto</span> p <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">make_pair</span><span style="color: #008000;">(</span><span style="color: #0000dd;">10</span>, <span style="color: #0000dd;">20</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 输出 pair 对象的元素</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"First element: "</span> <span style="color: #000080;">&lt;&lt;</span> p.<span style="color: #007788;">first</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Second element: "</span> <span style="color: #000080;">&lt;&lt;</span> p.<span style="color: #007788;">second</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果：</p>&#13;
<pre>&#13;
First element: 10&#13;
Second element: 20</pre>&#13;
<h3>使用 swap 函数</h3>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;utility&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">int</span> a <span style="color: #000080;">=</span> <span style="color: #0000dd;">5</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">int</span> b <span style="color: #000080;">=</span> <span style="color: #0000dd;">10</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Before swap: a = "</span> <span style="color: #000080;">&lt;&lt;</span> a <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">", b = "</span> <span style="color: #000080;">&lt;&lt;</span> b <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 使用 swap 函数交换 a 和 b 的值</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">swap</span><span style="color: #008000;">(</span>a, b<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"After swap: a = "</span> <span style="color: #000080;">&lt;&lt;</span> a <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">", b = "</span> <span style="color: #000080;">&lt;&lt;</span> b <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果：</p>&#13;
&#13;
<pre>Before swap: a = 5, b = 10&#13;
After swap: a = 10, b = 5</pre>&#13;
&#13;
<h3>&#13;
使用 move 函数</h3>&#13;
&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;utility&gt;</span><br/>
<span style="color: #060;">#include &lt;vector&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">vector</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">int</span><span style="color: #000080;">&gt;</span> v1 <span style="color: #000080;">=</span> <span style="color: #008000;">{</span><span style="color: #0000dd;">1</span>, <span style="color: #0000dd;">2</span>, <span style="color: #0000dd;">3</span>, <span style="color: #0000dd;">4</span>, <span style="color: #0000dd;">5</span><span style="color: #008000;">}</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">vector</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">int</span><span style="color: #000080;">&gt;</span> v2 <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">move</span><span style="color: #008000;">(</span>v1<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"v1 size: "</span> <span style="color: #000080;">&lt;&lt;</span> v1.<span style="color: #007788;">size</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span> <span style="color: #666666;">// v1 现在为空</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"v2 size: "</span> <span style="color: #000080;">&lt;&lt;</span> v2.<span style="color: #007788;">size</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span> <span style="color: #666666;">// v2 拥有 v1 的元素</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<h3>使用 forward 函数</h3>&#13;
&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;utility&gt;</span><br/>
<br/>
<span style="color: #05a;">void</span> process<span style="color: #008000;">(</span><span style="color: #05a;">int</span><span style="color: #000040;">&amp;</span> i<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Lvalue reference to "</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
<br/>
<span style="color: #05a;">void</span> process<span style="color: #008000;">(</span><span style="color: #05a;">int</span><span style="color: #000040;">&amp;&amp;</span> i<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Rvalue reference to "</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
<br/>
<span style="color: #05a;">template</span> <span style="color: #000080;">&lt;</span><span style="color: #05a;">typename</span> T<span style="color: #000080;">&gt;</span><br/>
<span style="color: #05a;">void</span> forward_example<span style="color: #008000;">(</span>T<span style="color: #000040;">&amp;&amp;</span> t<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    process<span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #007788;">forward</span><span style="color: #000080;">&lt;</span>T<span style="color: #000080;">&gt;</span><span style="color: #008000;">(</span>t<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">int</span> x <span style="color: #000080;">=</span> <span style="color: #0000dd;">10</span><span style="color: #008080;">;</span><br/>
    forward_example<span style="color: #008000;">(</span>x<span style="color: #008000;">)</span><span style="color: #008080;">;</span>           <span style="color: #666666;">// Lvalue reference</span><br/>
    forward_example<span style="color: #008000;">(</span><span style="color: #0000dd;">20</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span>          <span style="color: #666666;">// Rvalue reference</span><br/>
    forward_example<span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #007788;">move</span><span style="color: #008000;">(</span>x<span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><span style="color: #666666;">// Rvalue reference</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
&#13;
<h3>std::declval 实例</h3>&#13;
&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;utility&gt;</span><br/>
<span style="color: #060;">#include &lt;type_traits&gt;</span><br/>
<br/>
<span style="color: #05a;">struct</span> MyClass <span style="color: #008000;">{</span><br/>
    MyClass<span style="color: #008000;">(</span><span style="color: #05a;">int</span>, <span style="color: #05a;">double</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><span style="color: #008000;">}</span><br/>
<span style="color: #008000;">}</span><span style="color: #008080;">;</span><br/>
<br/>
<span style="color: #05a;">template</span> <span style="color: #000080;">&lt;</span><span style="color: #05a;">typename</span> T<span style="color: #000080;">&gt;</span><br/>
<span style="color: #05a;">void</span> test<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #666666;">// 获取 T 的构造函数返回的类型，而不实际调用它</span><br/>
    <span style="color: #05a;">using</span> R <span style="color: #000080;">=</span> decltype<span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #007788;">declval</span><span style="color: #000080;">&lt;</span>T<span style="color: #000080;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008000;">(</span><span style="color: #0000dd;">1</span>, <span style="color:#800080;">1.0</span><span style="color: #008000;">)</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">is_same</span><span style="color: #000080;">&lt;</span>R, MyClass<span style="color: #000080;">&gt;</span><span style="color: #008080;">::</span><span style="color: #007788;">value</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    test<span style="color: #000080;">&lt;</span>MyClass<span style="color: #000080;">&gt;</span><span style="color: #008000;">(</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 输出 1 (true)</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
&#13;
<p><code>&lt;utility&gt;</code> 头文件是 C++ 标准库中一个非常有用的部分，它提供了多种工具类和函数，帮助开发者编写更简洁、更高效的代码。</p>			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>