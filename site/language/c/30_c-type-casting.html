<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C 强制类型转换</title>
</head>
<body>
<div class="article-intro" id="content">
			
			
<h1>C <span class="color_h1">强制类型转换</span></h1>&#13;
&#13;
<p>强制类型转换是把变量从一种类型转换为另一种数据类型。例如，如果您想存储一个 long 类型的值到一个简单的整型中，您需要把 long 类型强制转换为 int 类型。您可以使用<b>强制类型转换运算符</b>来把值显式地从一种类型转换为另一种类型，如下所示：</p>&#13;
<pre>&#13;
(type_name) expression&#13;
</pre>&#13;
<p>请看下面的实例，使用强制类型转换运算符把一个整数变量除以另一个整数变量，得到一个浮点数：</p>&#13;
<div class="example">&#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">sum</span><span class="hl-code"> = </span><span class="hl-number">17</span><span class="hl-code">, </span><span class="hl-identifier">count</span><span class="hl-code"> = </span><span class="hl-number">5</span><span class="hl-code">;
   </span><span class="hl-types">double</span><span class="hl-code"> </span><span class="hl-identifier">mean</span><span class="hl-code">;
 
   </span><span class="hl-identifier">mean</span><span class="hl-code"> = </span><span class="hl-brackets">(</span><span class="hl-types">double</span><span class="hl-brackets">)</span><span class="hl-code"> </span><span class="hl-identifier">sum</span><span class="hl-code"> / </span><span class="hl-identifier">count</span><span class="hl-code">;
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">Value of mean : %f</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">mean</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
Value of mean : 3.400000&#13;
</pre>&#13;
<p>这里要注意的是强制类型转换运算符的优先级大于除法，因此 <b>sum</b> 的值首先被转换为 <b>double</b> 型，然后除以 count，得到一个类型为 double 的值。</p>&#13;
<p>类型转换可以是隐式的，由编译器自动执行，也可以是显式的，通过使用<b>强制类型转换运算符</b>来指定。在编程时，有需要类型转换的时候都用上强制类型转换运算符，是一种良好的编程习惯。</p>&#13;
&#13;
<h2 class="tutheader">整数提升</h2>&#13;
<p>整数提升是指把小于 <b>int</b> 或 <b>unsigned int</b> 的整数类型转换为 <b>int</b> 或 <b>unsigned int</b> 的过程。请看下面的实例，在 int 中添加一个字符：</p>&#13;
<div class="example">&#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-types">int</span><span class="hl-code">  </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-number">17</span><span class="hl-code">;
   </span><span class="hl-types">char</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code"> = '</span><span class="hl-identifier">c</span><span class="hl-code">'; </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> ascii 值是 99 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
   </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">sum</span><span class="hl-code">;
 
   </span><span class="hl-identifier">sum</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code">;
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">Value of sum : %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">sum</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
Value of sum : 116&#13;
</pre>&#13;
<p>在这里，sum 的值为 116，因为编译器进行了整数提升，在执行实际加法运算时，把 'c' 的值转换为对应的 ascii 值。</p>&#13;
&#13;
<h2 class="tutheader">常用的算术转换</h2>&#13;
<p><b>常用的算术转换</b>是隐式地把值强制转换为相同的类型。编译器首先执行<b>整数提升</b>，如果操作数类型不同，则它们会被转换为下列层次中出现的最高层次的类型：</p>&#13;
<img decoding="async" src="/wp-content/uploads/2014/08/usual_arithmetic_conversion.png" alt="Usual Arithmetic Conversion"/>&#13;
<p>常用的算术转换不适用于赋值运算符、逻辑运算符 &amp;&amp; 和 ||。让我们看看下面的实例来理解这个概念：</p>&#13;
<div class="example">&#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
   </span><span class="hl-types">int</span><span class="hl-code">  </span><span class="hl-identifier">i</span><span class="hl-code"> = </span><span class="hl-number">17</span><span class="hl-code">;
   </span><span class="hl-types">char</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code"> = '</span><span class="hl-identifier">c</span><span class="hl-code">'; </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> ascii 值是 99 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
   </span><span class="hl-types">float</span><span class="hl-code"> </span><span class="hl-identifier">sum</span><span class="hl-code">;
 
   </span><span class="hl-identifier">sum</span><span class="hl-code"> = </span><span class="hl-identifier">i</span><span class="hl-code"> + </span><span class="hl-identifier">c</span><span class="hl-code">;
   </span><span class="hl-identifier">printf</span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">Value of sum : %f</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">sum</span><span class="hl-code"> </span><span class="hl-brackets">)</span><span class="hl-code">;
 
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
Value of sum : 116.000000&#13;
</pre>&#13;
<p>在这里，c 首先被转换为整数，但是由于最后的值是 float 型的，所以会应用常用的算术转换，编译器会把 i 和 c 转换为浮点型，并把它们相加得到一个浮点数。</p>			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>