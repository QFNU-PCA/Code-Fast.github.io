<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C 作用域规则</title>
</head>
<body>
<div class="article-intro" id="content">
			
			
<h1>C <span class="color_h1">作用域规则</span></h1>&#13;
&#13;
<div class="tutintro">&#13;
<p>任何一种编程中，作用域是程序中定义的变量所存在的区域，超过该区域变量就不能被访问。C 语言中有三个地方可以声明变量：</p>&#13;
<ol class="list">&#13;
<li>在函数或块内部的<b>局部</b>变量</li>&#13;
<li>在所有函数外部的<b>全局</b>变量</li>&#13;
<li>在<b>形式</b>参数的函数参数定义中</li>&#13;
</ol>&#13;
<p>让我们来看看什么是<b>局部</b>变量、<b>全局</b>变量和<b>形式</b>参数。</p>&#13;
</div>&#13;
&#13;
<h2 class="tutheader">局部变量</h2>&#13;
<p>在某个函数或块的内部声明的变量称为局部变量。它们只能被该函数或该代码块内部的语句使用。局部变量在函数外部是不可知的。下面是使用局部变量的实例。在这里，所有的变量 a、b 和 c 是 main() 函数的局部变量。</p>&#13;
<div class="example"> &#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 局部变量声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">;
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code">;
 
  </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 实际初始化 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
  </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
  </span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-number">20</span><span class="hl-code">;
  </span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code">;
 
  </span><span class="hl-identifier">printf</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">value of a = %d, b = %d and c = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">c</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
&#13;
<h2 class="tutheader">全局变量</h2>&#13;
<p>全局变量是定义在函数外部，通常是在程序的顶部。全局变量在整个程序生命周期内都是有效的，在任意的函数内部能访问全局变量。</p>&#13;
<p>全局变量可以被任何函数访问。也就是说，全局变量在声明后整个程序中都是可用的。下面是使用全局变量和局部变量的实例：</p>&#13;
<div class="example"> &#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 全局变量声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">g</span><span class="hl-code">;
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 局部变量声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">;
 
  </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 实际初始化 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
  </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
  </span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-number">20</span><span class="hl-code">;
  </span><span class="hl-identifier">g</span><span class="hl-code"> = </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code">;
 
  </span><span class="hl-identifier">printf</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">value of a = %d, b = %d and g = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">, </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-code">, </span><span class="hl-identifier">g</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>在程序中，局部变量和全局变量的名称可以相同，但是在函数内，如果两个名字相同，会使用局部变量值，全局变量不会被使用。下面是一个实例：</p>&#13;
&#13;
在程序中，局部变量和全局变量的&#13;
<div class="example"> &#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 全局变量声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">g</span><span class="hl-code"> = </span><span class="hl-number">20</span><span class="hl-code">;
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 局部变量声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">g</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
 
  </span><span class="hl-identifier">printf</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">value of g = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">,  </span><span class="hl-identifier">g</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
value of g = 10&#13;
</pre>&#13;
&#13;
<h2 class="tutheader">形式参数</h2>&#13;
<p>函数的参数，形式参数，被当作该函数内的局部变量，如果与全局变量同名它们会优先使用。下面是一个实例：</p>&#13;
<div class="example"> &#13;
<h2 class="example">实例</h2>&#13;
<div class="example_code">&#13;
<div class="hl-main"><span class="hl-prepro">#include</span><span class="hl-prepro"> </span><span class="hl-quotes">&lt;</span><span class="hl-string">stdio.h</span><span class="hl-quotes">&gt;</span><span class="hl-prepro"/><span class="hl-code">
 
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 全局变量声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-number">20</span><span class="hl-code">;
 
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">main</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
  </span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 在主函数中的局部变量声明 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> = </span><span class="hl-number">10</span><span class="hl-code">;
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-code"> = </span><span class="hl-number">20</span><span class="hl-code">;
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-number">0</span><span class="hl-code">;
  </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">sum</span><span class="hl-brackets">(</span><span class="hl-types">int</span><span class="hl-code">, </span><span class="hl-types">int</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-identifier">printf</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">value of a in main() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">,  </span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-identifier">c</span><span class="hl-code"> = </span><span class="hl-identifier">sum</span><span class="hl-brackets">(</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
  </span><span class="hl-identifier">printf</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">value of c in main() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">,  </span><span class="hl-identifier">c</span><span class="hl-brackets">)</span><span class="hl-code">;
 
  </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-number">0</span><span class="hl-code">;
</span><span class="hl-brackets">}</span><span class="hl-code">
 
</span><span class="hl-mlcomment">/*</span><span class="hl-mlcomment"> 添加两个整数的函数 </span><span class="hl-mlcomment">*/</span><span class="hl-code">
</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">sum</span><span class="hl-brackets">(</span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code">, </span><span class="hl-types">int</span><span class="hl-code"> </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">
</span><span class="hl-brackets">{</span><span class="hl-code">
    </span><span class="hl-identifier">printf</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">value of a in sum() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">,  </span><span class="hl-identifier">a</span><span class="hl-brackets">)</span><span class="hl-code">;
    </span><span class="hl-identifier">printf</span><span class="hl-code"> </span><span class="hl-brackets">(</span><span class="hl-quotes">"</span><span class="hl-string">value of b in sum() = %d</span><span class="hl-special">\</span><span class="hl-string">n</span><span class="hl-quotes">"</span><span class="hl-code">,  </span><span class="hl-identifier">b</span><span class="hl-brackets">)</span><span class="hl-code">;
 
    </span><span class="hl-reserved">return</span><span class="hl-code"> </span><span class="hl-identifier">a</span><span class="hl-code"> + </span><span class="hl-identifier">b</span><span class="hl-code">;
</span><span class="hl-brackets">}</span></div>&#13;
</div>&#13;
</div>&#13;
<p>当上面的代码被编译和执行时，它会产生下列结果：</p>&#13;
<pre>&#13;
value of a in main() = 10&#13;
value of a in sum() = 10&#13;
value of b in sum() = 20&#13;
value of c in main() = 30&#13;
</pre>&#13;
&#13;
&#13;
<blockquote><p><strong>全局变量与局部变量在内存中的区别</strong>：</p>&#13;
<ul><li>&#13;
全局变量保存在内存的全局存储区中，占用静态的存储单元；</li><li>&#13;
局部变量保存在栈中，只有在所在函数被调用时才动态地为变量分配存储单元。</li></ul>&#13;
&#13;
<p>更多内容可参考：<a href="/w3cnote/cpp-static-usage.html" rel="noopener" target="_blank">C/C++ 中 static 的用法全局变量与局部变量</a></p></blockquote>&#13;
&#13;
&#13;
<h2 class="tutheader">初始化局部变量和全局变量</h2>&#13;
<p>当局部变量被定义时，系统不会对其初始化，您必须自行对其初始化。定义全局变量时，系统会自动对其初始化，如下所示：</p>&#13;
<table class="reference notranslate">&#13;
<tr><th style="width:30%">数据类型</th><th>初始化默认值</th></tr>&#13;
<tr><td>   int     </td><td>  0    </td> </tr>&#13;
<tr><td>   char    </td><td>  '\0' </td> </tr>&#13;
<tr><td>   float   </td><td>  0    </td> </tr>&#13;
<tr><td>   double   </td><td>  0    </td> </tr>&#13;
<tr><td>   pointer </td><td>  NULL </td> </tr>&#13;
</table>&#13;
<p>正确地初始化变量是一个良好的编程习惯，否则有时候程序可能会产生意想不到的结果，因为未初始化的变量会导致一些在内存位置中已经可用的垃圾值。</p>			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>