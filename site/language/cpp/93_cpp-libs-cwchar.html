<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C++ 标准库 <cwchar></title>
</head>
<body>
<div class="article-intro" id="content">
			
			<h1>C++ 标准库 &lt;cwchar&gt;</h1>&#13;
<p><code>&lt;cwchar&gt;</code> 是 C++ 标准库中的一个头文件，提供了处理宽字符（<code>wchar_t</code>）和宽字符串的函数。这些函数大部分来自 C 标准库的 <code>&lt;wchar.h&gt;</code>，用于处理宽字符的输入输出、内存操作、字符串操作和其他与宽字符相关的功能。</p>&#13;
<h2>语法</h2>&#13;
<p><code>cwchar</code> 头文件中定义的函数通常具有与标准字符处理函数相似的名称，但以 <code>w</code> 开头，例如 <code>wprintf</code>、<code>wscanf</code> 等。这些函数的参数和返回类型也与相应的标准字符函数不同，它们使用宽字符类型 <code>wchar_t</code>。</p>&#13;
<h3>基本类型</h3>&#13;
<ul>&#13;
<li><code>wchar_t</code>：宽字符类型，用于存储宽字符。</li>&#13;
<li><code>wint_t</code>：用于存储宽字符函数的返回值。</li>&#13;
</ul>&#13;
<h2>常用函数</h2>&#13;
 <h3>1. <strong>宽字符输入输出</strong></h3>&#13;
    <ul>&#13;
        <li><code>fgetwc</code>：从文件流中读取宽字符。</li>&#13;
        <li><code>fputwc</code>：向文件流中写入宽字符。</li>&#13;
        <li><code>fgetws</code>：从文件流中读取宽字符串。</li>&#13;
        <li><code>fputws</code>：向文件流中写入宽字符串。</li>&#13;
    </ul>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;cwchar&gt;</span><br/>
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #666666;">// 使用 fputws 和 fgetws 进行宽字符串输入输出</span><br/>
    <span style="color: #05a;">const</span> <span style="color: #05a;">wchar_t</span> <span style="color: #000040;">*</span>filename <span style="color: #000080;">=</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"example.txt"</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">FILE</span> <span style="color: #000040;">*</span>file <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #05a;">fopen</span><span style="color: #008000;">(</span><span style="color: #a11;">"example.txt"</span>, <span style="color: #a11;">"w"</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">if</span> <span style="color: #008000;">(</span>file<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #007788;">fputws</span><span style="color: #008000;">(</span><span style="color: #696969;;">L</span><span style="color: #a11;">"Hello, 世界!<span style="color: #000099; font-weight: bold;">\n</span>"</span>, file<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">fclose</span><span style="color: #008000;">(</span>file<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    file <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #05a;">fopen</span><span style="color: #008000;">(</span><span style="color: #a11;">"example.txt"</span>, <span style="color: #a11;">"r"</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">if</span> <span style="color: #008000;">(</span>file<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        <span style="color: #05a;">wchar_t</span> buffer<span style="color: #008000;">[</span><span style="color: #0000dd;">256</span><span style="color: #008000;">]</span><span style="color: #008080;">;</span><br/>
        <span style="color: #05a;">if</span> <span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #007788;">fgetws</span><span style="color: #008000;">(</span>buffer, <span style="color: #0000dd;">256</span>, file<span style="color: #008000;">)</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
            std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Read from file: "</span> <span style="color: #000080;">&lt;&lt;</span> buffer<span style="color: #008080;">;</span><br/>
        <span style="color: #008000;">}</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">fclose</span><span style="color: #008000;">(</span>file<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>&#13;
输出结果为：</p>&#13;
<pre>Read from file: Hello, 世界!</pre>&#13;
<h3>2. <strong>宽字符和宽字符串操作</strong></h3>&#13;
    <ul>&#13;
        <li><code>wcscpy</code>：拷贝宽字符串。</li>&#13;
        <li><code>wcslen</code>：获取宽字符串长度。</li>&#13;
        <li><code>wcscmp</code>：比较宽字符串。</li>&#13;
        <li><code>wcsncpy</code>：拷贝指定长度的宽字符串。</li>&#13;
    </ul>&#13;
&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;cwchar&gt;</span><br/>
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">wchar_t</span> str1<span style="color: #008000;">[</span><span style="color: #0000dd;">100</span><span style="color: #008000;">]</span> <span style="color: #000080;">=</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Hello"</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">wchar_t</span> str2<span style="color: #008000;">[</span><span style="color: #0000dd;">100</span><span style="color: #008000;">]</span> <span style="color: #000080;">=</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"World"</span><span style="color: #008080;">;</span><br/>
    <br/>
    <span style="color: #666666;">// 宽字符串拷贝</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcscpy</span><span style="color: #008000;">(</span>str1, <span style="color: #696969;;">L</span><span style="color: #a11;">"Hello, 世界!"</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Copied string: "</span> <span style="color: #000080;">&lt;&lt;</span> str1 <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 宽字符串长度</span><br/>
    <span style="color: #05a;">size_t</span> len <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">wcslen</span><span style="color: #008000;">(</span>str1<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Length of string: "</span> <span style="color: #000080;">&lt;&lt;</span> len <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 宽字符串比较</span><br/>
    <span style="color: #05a;">int</span> result <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">wcscmp</span><span style="color: #008000;">(</span>str1, str2<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Comparison result: "</span> <span style="color: #000080;">&lt;&lt;</span> result <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 宽字符串部分拷贝</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcsncpy</span><span style="color: #008000;">(</span>str2, str1, <span style="color: #0000dd;">5</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    str2<span style="color: #008000;">[</span><span style="color: #0000dd;">5</span><span style="color: #008000;">]</span> <span style="color: #000080;">=</span> L<span style="color: #a11;">'<span style="color: #006699; font-weight: bold;">\0</span>'</span><span style="color: #008080;">;</span>  <span style="color: #666666;">// 确保以空字符结束</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Partially copied string: "</span> <span style="color: #000080;">&lt;&lt;</span> str2 <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div><p>输出结果为：</p>&#13;
<pre>Copied string: Hello, </pre>&#13;
  <h3>3. <strong>宽字符分类和转换</strong></h3>&#13;
    <ul>&#13;
        <li><code>iswalpha</code>：判断宽字符是否为字母。</li>&#13;
        <li><code>iswdigit</code>：判断宽字符是否为数字。</li>&#13;
        <li><code>towlower</code>：将宽字符转换为小写。</li>&#13;
        <li><code>towupper</code>：将宽字符转换为大写。</li>&#13;
    </ul>&#13;
&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;cwchar&gt;</span><br/>
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">wchar_t</span> ch <span style="color: #000080;">=</span> L<span style="color: #a11;">'A'</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 判断宽字符是否为字母</span><br/>
    <span style="color: #05a;">if</span> <span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #007788;">iswalpha</span><span style="color: #008000;">(</span>ch<span style="color: #008000;">)</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> ch <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">" is an alphabetic character."</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    <span style="color: #666666;">// 判断宽字符是否为数字</span><br/>
    ch <span style="color: #000080;">=</span> L<span style="color: #a11;">'9'</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">if</span> <span style="color: #008000;">(</span>std<span style="color: #008080;">::</span><span style="color: #007788;">iswdigit</span><span style="color: #008000;">(</span>ch<span style="color: #008000;">)</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> ch <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">" is a digit."</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
<br/>
    <span style="color: #666666;">// 宽字符转换为小写</span><br/>
    ch <span style="color: #000080;">=</span> L<span style="color: #a11;">'G'</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">wchar_t</span> lower_ch <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">towlower</span><span style="color: #008000;">(</span>ch<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Lowercase of "</span> <span style="color: #000080;">&lt;&lt;</span> ch <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">" is "</span> <span style="color: #000080;">&lt;&lt;</span> lower_ch <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 宽字符转换为大写</span><br/>
    ch <span style="color: #000080;">=</span> L<span style="color: #a11;">'a'</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">wchar_t</span> upper_ch <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #007788;">towupper</span><span style="color: #008000;">(</span>ch<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Uppercase of "</span> <span style="color: #000080;">&lt;&lt;</span> ch <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">" is "</span> <span style="color: #000080;">&lt;&lt;</span> upper_ch <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果为：</p>&#13;
<pre>&#13;
A is an alphabetic character.&#13;
9 is a digit.&#13;
Lowercase of G is g&#13;
Uppercase of a is A&#13;
</pre>&#13;
 <h3>4. <strong>宽字符和宽字符串的输入输出</strong></h3>&#13;
    <ul>&#13;
        <li><code>wprintf</code>：宽字符格式化输出。</li>&#13;
        <li><code>wscanf</code>：宽字符格式化输入。</li>&#13;
        <li><code>swprintf</code>：将格式化宽字符写入宽字符串。</li>&#13;
        <li><code>swscanf</code>：从宽字符串中读取格式化宽字符。</li>&#13;
    </ul>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;cwchar&gt;</span><br/>
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    <span style="color: #05a;">wchar_t</span> buffer<span style="color: #008000;">[</span><span style="color: #0000dd;">100</span><span style="color: #008000;">]</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 宽字符格式化输出</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wprintf</span><span style="color: #008000;">(</span><span style="color: #696969;;">L</span><span style="color: #a11;">"Formatted output: %d %s<span style="color: #000099; font-weight: bold;">\n</span>"</span>, <span style="color: #0000dd;">42</span>, <span style="color: #696969;;">L</span><span style="color: #a11;">"Hello"</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 宽字符格式化输入</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wprintf</span><span style="color: #008000;">(</span><span style="color: #696969;;">L</span><span style="color: #a11;">"Enter a number and a string: "</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wscanf</span><span style="color: #008000;">(</span><span style="color: #696969;;">L</span><span style="color: #a11;">"%d %ls"</span>, <span style="color: #000040;">&amp;</span>buffer<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wprintf</span><span style="color: #008000;">(</span><span style="color: #696969;;">L</span><span style="color: #a11;">"You entered: %ls<span style="color: #000099; font-weight: bold;">\n</span>"</span>, buffer<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 将格式化宽字符写入宽字符串</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">swprintf</span><span style="color: #008000;">(</span>buffer, <span style="color: #0000dd;">100</span>, <span style="color: #696969;;">L</span><span style="color: #a11;">"Formatted %d %s"</span>, <span style="color: #0000dd;">42</span>, <span style="color: #696969;;">L</span><span style="color: #a11;">"output"</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Buffer: "</span> <span style="color: #000080;">&lt;&lt;</span> buffer <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #666666;">// 从宽字符串中读取格式化宽字符</span><br/>
    <span style="color: #05a;">int</span> number<span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">wchar_t</span> word<span style="color: #008000;">[</span><span style="color: #0000dd;">100</span><span style="color: #008000;">]</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">swscanf</span><span style="color: #008000;">(</span>buffer, <span style="color: #696969;;">L</span><span style="color: #a11;">"Formatted %d %s"</span>, <span style="color: #000040;">&amp;</span>number, word<span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">wcout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">"Parsed number: "</span> <span style="color: #000080;">&lt;&lt;</span> number <span style="color: #000080;">&lt;&lt;</span> <span style="color: #696969;;">L</span><span style="color: #a11;">", word: "</span> <span style="color: #000080;">&lt;&lt;</span> word <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果为：</p>&#13;
<pre>&#13;
Formatted output: 42 H&#13;
Enter a number and a string: runoob&#13;
You entered: &#13;
Buffer: Formatted 42 o&#13;
Parsed number: 42, word: o&#13;
</pre>			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>