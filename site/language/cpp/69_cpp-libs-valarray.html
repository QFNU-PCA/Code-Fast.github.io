<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>C++ 标准库 <valarray></title>
</head>
<body>
<div class="article-intro" id="content">
			
			<h1>C++ 标准库 <code>&lt;valarray&gt;</code></h1>&#13;
&#13;
<p>C++ 的 <code>&lt;valarray&gt;</code> 库是一个用于数值计算的库，它提供了一种高效的方式来处理数值数组。<code>&lt;valarray&gt;</code> 库中的 <code>valarray</code> 类模板允许程序员对数组进行元素级的数学运算，包括加法、减法、乘法、除法等。此外，它还支持更高级的数学函数，如指数、对数、正弦、余弦等。</p>&#13;
&#13;
<p><code>valarray</code> 是 C++ 标准库中的一个类模板，用于表示和操作数值数组。它提供了一种方便的方式来执行数组的元素级操作。</p>&#13;
<h3>语法</h3>&#13;
<p><code>valarray</code> 的基本语法如下：</p>&#13;
<pre>#include &lt;valarray&gt;&#13;
&#13;
int main() {&#13;
    std::valarray&lt;double&gt; va(10); // 创建一个包含10个double元素的valarray&#13;
    va = 1; // 将所有元素初始化为1&#13;
    // ...&#13;
    return 0;&#13;
}</pre>&#13;
<h2>实例</h2><h3>&#13;
1. 创建和初始化 valarray</h3>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;valarray&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> va<span style="color: #008000;">(</span><span style="color: #0000dd;">5</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 创建一个包含5个double元素的valarray</span><br/>
    va <span style="color: #000080;">=</span> <span style="color: #008000;">{</span><span style="color:#800080;">1.0</span>, <span style="color:#800080;">2.0</span>, <span style="color:#800080;">3.0</span>, <span style="color:#800080;">4.0</span>, <span style="color:#800080;">5.0</span><span style="color: #008000;">}</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 初始化valarray</span><br/>
<br/>
    <span style="color: #05a;">for</span> <span style="color: #008000;">(</span><span style="color: #05a;">auto</span> i <span style="color: #008080;">:</span> va<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果:</p>&#13;
<pre>&#13;
1 2 3 4 5</pre><h3>&#13;
2. 基本运算</h3>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;valarray&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> va1<span style="color: #008000;">(</span><span style="color: #0000dd;">5</span><span style="color: #008000;">)</span>, va2<span style="color: #008000;">(</span><span style="color: #0000dd;">5</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    va1 <span style="color: #000080;">=</span> <span style="color: #008000;">{</span><span style="color:#800080;">1.0</span>, <span style="color:#800080;">2.0</span>, <span style="color:#800080;">3.0</span>, <span style="color:#800080;">4.0</span>, <span style="color:#800080;">5.0</span><span style="color: #008000;">}</span><span style="color: #008080;">;</span><br/>
    va2 <span style="color: #000080;">=</span> <span style="color: #008000;">{</span><span style="color:#800080;">2.0</span>, <span style="color:#800080;">3.0</span>, <span style="color:#800080;">4.0</span>, <span style="color:#800080;">5.0</span>, <span style="color:#800080;">6.0</span><span style="color: #008000;">}</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> sum <span style="color: #000080;">=</span> va1 <span style="color: #000040;">+</span> va2<span style="color: #008080;">;</span> <span style="color: #666666;">// 加法</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> diff <span style="color: #000080;">=</span> va1 <span style="color: #000040;">-</span> va2<span style="color: #008080;">;</span> <span style="color: #666666;">// 减法</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> prod <span style="color: #000080;">=</span> va1 <span style="color: #000040;">*</span> va2<span style="color: #008080;">;</span> <span style="color: #666666;">// 乘法</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> quot <span style="color: #000080;">=</span> va1 <span style="color: #000040;">/</span> va2<span style="color: #008080;">;</span> <span style="color: #666666;">// 除法</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Sum: "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">for</span> <span style="color: #008000;">(</span><span style="color: #05a;">auto</span> i <span style="color: #008080;">:</span> sum<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Difference: "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">for</span> <span style="color: #008000;">(</span><span style="color: #05a;">auto</span> i <span style="color: #008080;">:</span> diff<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Product: "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">for</span> <span style="color: #008000;">(</span><span style="color: #05a;">auto</span> i <span style="color: #008080;">:</span> prod<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Quotient: "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">for</span> <span style="color: #008000;">(</span><span style="color: #05a;">auto</span> i <span style="color: #008080;">:</span> quot<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果:</p>&#13;
&#13;
<pre>Sum: 3 5 7 9 11 &#13;
Difference: -1 -1 1 1 -1 &#13;
Product: 2 6 12 20 30 &#13;
Quotient: 0.5 0.6666667 0.75 0.8 0.8333334</pre><h3>&#13;
3. 使用 valarray 进行数学函数操作</h3>&#13;
<div class="example"><h2 class="example">实例</h2> <div class="example_code">
<span style="color: #060;">#include &lt;iostream&gt;</span><br/>
<span style="color: #060;">#include &lt;valarray&gt;</span><br/>
<span style="color: #060;">#include &lt;cmath&gt;</span><br/>
<br/>
<span style="color: #05a;">int</span> main<span style="color: #008000;">(</span><span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> va<span style="color: #008000;">(</span><span style="color: #0000dd;">5</span><span style="color: #008000;">)</span><span style="color: #008080;">;</span><br/>
    va <span style="color: #000080;">=</span> <span style="color: #008000;">{</span><span style="color:#800080;">1.0</span>, <span style="color:#800080;">2.0</span>, <span style="color:#800080;">3.0</span>, <span style="color:#800080;">4.0</span>, <span style="color:#800080;">5.0</span><span style="color: #008000;">}</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> squares <span style="color: #000080;">=</span> va <span style="color: #000040;">*</span> va<span style="color: #008080;">;</span> <span style="color: #666666;">// 平方</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #007788;">valarray</span><span style="color: #000080;">&lt;</span><span style="color: #05a;">double</span><span style="color: #000080;">&gt;</span> roots <span style="color: #000080;">=</span> std<span style="color: #008080;">::</span><span style="color: #05a;">sqrt</span><span style="color: #008000;">(</span>va<span style="color: #008000;">)</span><span style="color: #008080;">;</span> <span style="color: #666666;">// 开方</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Squares: "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">for</span> <span style="color: #008000;">(</span><span style="color: #05a;">auto</span> i <span style="color: #008080;">:</span> squares<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">"Square Roots: "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #05a;">for</span> <span style="color: #008000;">(</span><span style="color: #05a;">auto</span> i <span style="color: #008080;">:</span> roots<span style="color: #008000;">)</span> <span style="color: #008000;">{</span><br/>
        std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> i <span style="color: #000080;">&lt;&lt;</span> <span style="color: #a11;">" "</span><span style="color: #008080;">;</span><br/>
    <span style="color: #008000;">}</span><br/>
    std<span style="color: #008080;">::</span><span style="color: #05a;">cout</span> <span style="color: #000080;">&lt;&lt;</span> std<span style="color: #008080;">::</span><span style="color: #007788;">endl</span><span style="color: #008080;">;</span><br/>
<br/>
    <span style="color: #05a;">return</span> <span style="color: #0000dd;">0</span><span style="color: #008080;">;</span><br/>
<span style="color: #008000;">}</span><br/>
</div></div>&#13;
<p>输出结果:</p>&#13;
&#13;
<pre>&#13;
Squares: 1 4 9 16 25 &#13;
Square Roots: 1 1.4142136 1.7320508</pre>			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>