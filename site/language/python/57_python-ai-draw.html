<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>Python AI  绘画</title>
</head>
<body>
<div class="article-intro" id="content">
			
			<h1>Python AI  绘画</h1>&#13;
<p>本文我们将为大家介绍如何基于一些开源的库来搭建一套自己的 AI 作图工具。</p>&#13;
<p>需要使用的开源库为 Stable Diffusion web UI，它是基于 Gradio 库的 Stable Diffusion 浏览器界面</p>&#13;
<p>Stable Diffusion web UI GitHub 地址：<a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui" rel="noopener" target="_blank">https://github.com/AUTOMATIC1111/stable-diffusion-webui</a></p>&#13;
&#13;
<p class="important">运行 Stable Diffusion 需要硬件要求比较高，运行时会消耗较大的资源，特别是显卡。</p>&#13;
<h3>Windows 环境安装</h3><p>&#13;
本地环境要求安装 Python 3.10.6 或以上版本，并把它加入到本机的环境变量中。</p><p>&#13;
下载 Stable Diffusion web UI GitHub 源码 <a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui" rel="noopener" target="_blank">https://github.com/AUTOMATIC1111/stable-diffusion-webui</a>。</p>&#13;
<pre>git clone https://github.com/AUTOMATIC1111/stable-diffusion-webui.git</pre>&#13;
<p>如果没有安装 Git ，可以在右上角下载 zip 压缩包。</p>&#13;
&#13;
<p><img decoding="async" width="50%" src="https://www.runoob.com/wp-content/uploads/2023/04/1d0b3880e9f246f3b50075f9dd874eb2.png"/></p>&#13;
<p>解压 stable-diffusion-webui，并进入 stable-diffusion-webui 目录。</p>&#13;
<p>接下来我们需要下载模型，下载地址：<a href="https://huggingface.co/CompVis/stable-diffusion-v-1-4-original" rel="noopener" target="_blank">https://huggingface.co/CompVis/stable-diffusion-v-1-4-original</a></p>&#13;
<p><img decoding="async" width="50%" src="https://www.runoob.com/wp-content/uploads/2023/04/199a2c028c3fb22d9946391a845b1e93.png"/></p>&#13;
<p>将下载的模型移动到 <span class="marked">stable-diffusion-webui/models/Stable-diffusion</span> 目录下。</p>&#13;
<p>进入 stable-diffusion-webui 目录：</p>&#13;
&#13;
&#13;
<p>&#13;
Windows 使用非管理员运行: </p>&#13;
<pre>webui-user.bat</pre>&#13;
<p>Linux 和 Mac OS 环境执行以下命令：</p>&#13;
&#13;
<pre>./webui.sh</pre><p>&#13;
接下来程序就会自动安装并启动，启动成功会看到一个可访问的 URL 地址 <span class="marked">http://127.0.0.1:7860</span>：</p>&#13;
<p><img decoding="async" width="70%" src="https://www.runoob.com/wp-content/uploads/2023/04/e3a349b8c5c122b17af780a0e3918872.png"/></p>&#13;
&#13;
<p>访问 <span class="marked">http://127.0.0.1:7860</span>，界面如下：</p>&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2023/04/94db8ed9769fee5a9d68e43ec4ba1d76-.png"/></p>&#13;
<blockquote><strong>注意:</strong> 如果安装出现卡住不动，很可能是下载 Github 源码出现问题了，可以使用 Github 的一些镜像来解决，目前还没非常稳定的镜像，建议 Google 搜索下。&#13;
我这边在 2023 年 4 月 6 号使用以下镜像地址 <span class="marked">https://hub.fgit.ml</span>，打开 stable-diffusion-webui 目录的 launch.py 文件，替换以下部分代码的 Github 地址（代码大概在 230～240 行之间）：&#13;
<p><img decoding="async" width="80%" src="https://www.runoob.com/wp-content/uploads/2023/04/5fdfe36f22e6c09312860a789ce5fe70.png"/></p></blockquote>&#13;
&#13;
&#13;
&#13;
&#13;
<h3>Civitai 介绍</h3>&#13;
<p>Civitai 有许多定制好的模型，而且可以免费下载，我们使用<strong>国风3</strong>模型来测试，下载地址：<a href="https://civitai.com/models/10415/3-guofeng3?modelVersionId=36644" rel="noopener" target="_blank">https://civitai.com/models/10415/3-guofeng3?modelVersionId=36644</a></p>&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2023/04/drawai-c-1.png"/></p>&#13;
<p>&#13;
下载完后，我们将模型移动到 <span class="marked">stable-diffusion-webui/models/Stable-diffusion</span> 目录下，重新启动 stable-diffusion-webui ：</p>&#13;
<pre>./webui.sh</pre><p>&#13;
这样我们就可以在模型列表中选择<strong>国风3</strong>模型了：</p>&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2023/04/e570bdeee6a5e36e0bc99078d3033a57.png"/></p>&#13;
<p>选择后，我们可以到模型介绍页面去拷贝一些提示词和测试参数：</p>&#13;
&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2023/04/drawai-c-2.png"/></p>&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2023/04/drawai-c-3.png"/></p>&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2023/04/drawai-c-4.png"/></p>&#13;
<p>​为了快速生成，我高度跟宽度都减半了，之后点生成按钮即可：</p>&#13;
<p><img decoding="async" src="https://www.runoob.com/wp-content/uploads/2023/04/dcaaddda2a89ce2e0fb8443ae25823f9.png"/></p>&#13;
<p>生成完整过程，可以关注我们微信视频号查看：</p>&#13;
<p><img decoding="async" width="50%" src="https://www.runoob.com/wp-content/uploads/2023/04/WechatIMG359.jpeg"/></p>&#13;
&#13;
&#13;
			<!-- 其他扩展 -->
						
			</div>
			
		
</body>
</html>